<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="ReponseEvaluation">

	<typeAlias alias="ClassReponseEvaluation"
		type="org.esupportail.pstagedata.domain.beans.ReponseEvaluation" />

	<resultMap id="ReponseEvaluation" class="ClassReponseEvaluation">
		<result property="idFicheEvaluation" column="idFicheEvaluation" />
		<result property="idConvention" column="idConvention" />
		<result property="validationEtudiant" column="validationEtudiant" />
		<result property="validationEnseignant" column="validationEnseignant" />
		<result property="validationEntreprise" column="validationEntreprise" />
		<result property="envoiMailTuteurPro" column="envoiMailTuteurPro" />
		<result property="dateEnvoiMailTuteurPro" column="dateEnvoiMailTuteurPro" javaType="java.util.Date" jdbcType="DATETIME"/>
		<result property="codeAcces" column="codeAcces" />
		<result property="reponseEnt1" column="reponseEnt1" nullValue="0" />
		<result property="reponseEnt1bis" column="reponseEnt1bis" />
		<result property="reponseEnt2" column="reponseEnt2" nullValue="0" />
		<result property="reponseEnt2bis" column="reponseEnt2bis" />
		<result property="reponseEnt3" column="reponseEnt3" nullValue="0" />
		<result property="reponseEnt4" column="reponseEnt4" nullValue="0" />
		<result property="reponseEnt4bis" column="reponseEnt4bis" />
		<result property="reponseEnt5" column="reponseEnt5" nullValue="0" />
		<result property="reponseEnt5bis" column="reponseEnt5bis" />
		<result property="reponseEnt6" column="reponseEnt6" nullValue="0" />
		<result property="reponseEnt6bis" column="reponseEnt6bis" />
		<result property="reponseEnt7" column="reponseEnt7" nullValue="0" />
		<result property="reponseEnt7bis" column="reponseEnt7bis" />
		<result property="reponseEnt8" column="reponseEnt8" nullValue="0" />
		<result property="reponseEnt8bis" column="reponseEnt8bis" />
		<result property="reponseEnt9" column="reponseEnt9" nullValue="0" />
		<result property="reponseEnt9bis" column="reponseEnt9bis" />
		<result property="reponseEnt10" column="reponseEnt10"
			nullValue="0" />
		<result property="reponseEnt10bis" column="reponseEnt10bis" />
		<result property="reponseEnt11" column="reponseEnt11"
			nullValue="0" />
		<result property="reponseEnt11bis" column="reponseEnt11bis" />
		<result property="reponseEnt12" column="reponseEnt12"
			nullValue="0" />
		<result property="reponseEnt12bis" column="reponseEnt12bis" />
		<result property="reponseEnt13" column="reponseEnt13"
			nullValue="0" />
		<result property="reponseEnt13bis" column="reponseEnt13bis" />
		<result property="reponseEnt14" column="reponseEnt14"
			nullValue="0" />
		<result property="reponseEnt14bis" column="reponseEnt14bis" />
		<result property="reponseEnt15" column="reponseEnt15"
			nullValue="0" />
		<result property="reponseEnt15bis" column="reponseEnt15bis" />
		<result property="reponseEnt16" column="reponseEnt16"
			nullValue="0" />
		<result property="reponseEnt16bis" column="reponseEnt16bis" />
		<result property="reponseEnt17" column="reponseEnt17"
			nullValue="0" />
		<result property="reponseEnt17bis" column="reponseEnt17bis" />
		<result property="reponseEnt18" column="reponseEnt18"
			nullValue="0" />
		<result property="reponseEnt18bis" column="reponseEnt18bis"/>
		<result property="reponseEnt19" column="reponseEnt19" />
		<result property="reponseEtuI1" column="reponseEtuI1" nullValue="0" />
		<result property="reponseEtuI1bis" column="reponseEtuI1bis" />
		<result property="reponseEtuI2" column="reponseEtuI2" nullValue="0" />
		<result property="reponseEtuI3" column="reponseEtuI3" nullValue="0" />
		<result property="reponseEtuI4a" column="reponseEtuI4a" />
		<result property="reponseEtuI4b" column="reponseEtuI4b" />
		<result property="reponseEtuI4c" column="reponseEtuI4c" />
		<result property="reponseEtuI4d" column="reponseEtuI4d" />
		<result property="reponseEtuI5" column="reponseEtuI5"
			nullValue="0" />
		<result property="reponseEtuI6" column="reponseEtuI6" nullValue="0" />
		<result property="reponseEtuI7" column="reponseEtuI7" />
		<result property="reponseEtuI7bis1" column="reponseEtuI7bis1" nullValue="0" />
		<result property="reponseEtuI7bis1a" column="reponseEtuI7bis1a" />
		<result property="reponseEtuI7bis1b" column="reponseEtuI7bis1b" />
		<result property="reponseEtuI7bis2" column="reponseEtuI7bis2" nullValue="0" />
		<result property="reponseEtuI8" column="reponseEtuI8" />
		<result property="reponseEtuII1" column="reponseEtuII1"
			nullValue="0" />
		<result property="reponseEtuII1bis" column="reponseEtuII1bis" />
		<result property="reponseEtuII2" column="reponseEtuII2"
			nullValue="0" />
		<result property="reponseEtuII2bis" column="reponseEtuII2bis" />
		<result property="reponseEtuII3" column="reponseEtuII3"
			nullValue="0" />
		<result property="reponseEtuII3bis" column="reponseEtuII3bis" />
		<result property="reponseEtuII4" column="reponseEtuII4" nullValue="0" />
		<result property="reponseEtuII5" column="reponseEtuII5" />
		<result property="reponseEtuII5a" column="reponseEtuII5a" nullValue="0" />
		<result property="reponseEtuII5b" column="reponseEtuII5b" />
		<result property="reponseEtuII6" column="reponseEtuII6" />
		<result property="reponseEtuIII1" column="reponseEtuIII1" />
		<result property="reponseEtuIII1bis" column="reponseEtuIII1bis" />
		<result property="reponseEtuIII2" column="reponseEtuIII2" />
		<result property="reponseEtuIII2bis" column="reponseEtuIII2bis" />
		<result property="reponseEtuIII3" column="reponseEtuIII3" />
		<result property="reponseEtuIII3bis" column="reponseEtuIII3bis" />
		<result property="reponseEtuIII4" column="reponseEtuIII4" nullValue="0" />
		<result property="reponseEtuIII5a" column="reponseEtuIII5a" />
		<result property="reponseEtuIII5b" column="reponseEtuIII5b" />
		<result property="reponseEtuIII5c" column="reponseEtuIII5c" />
		<result property="reponseEtuIII5bis" column="reponseEtuIII5bis" />
		<result property="reponseEtuIII6" column="reponseEtuIII6"
			nullValue="0" />
		<result property="reponseEtuIII7" column="reponseEtuIII7"
			nullValue="0" />
		<result property="reponseEtuIII7bis" column="reponseEtuIII7bis" />
		<result property="reponseEtuIII8" column="reponseEtuIII8"
			nullValue="0" />
		<result property="reponseEtuIII8bis" column="reponseEtuIII8bis"/>
		<result property="reponseEtuIII9" column="reponseEtuIII9" />
		<result property="reponseEtuIII9bis" column="reponseEtuIII9bis" />
		<result property="reponseEtuIII10" column="reponseEtuIII10" />
		<result property="reponseEtuIII11" column="reponseEtuIII11" />
		<result property="reponseEtuIII12" column="reponseEtuIII12" />
		<result property="reponseEtuIII13" column="reponseEtuIII13" />
		<result property="reponseEtuIII14" column="reponseEtuIII14" />
		<result property="reponseEtuIII15" column="reponseEtuIII15"
			nullValue="0" />
		<result property="reponseEtuIII15bis" column="reponseEtuIII15bis" />
		<result property="reponseEtuIII16" column="reponseEtuIII16"
			nullValue="0" />
		<result property="reponseEtuIII16bis" column="reponseEtuIII16bis" />
		<result property="reponseEnsI1a" column="reponseEnsI1a" />
		<result property="reponseEnsI1b" column="reponseEnsI1b" />
		<result property="reponseEnsI1c" column="reponseEnsI1c" />
		<result property="reponseEnsI2a" column="reponseEnsI2a" />
		<result property="reponseEnsI2b" column="reponseEnsI2b" />
		<result property="reponseEnsI2c" column="reponseEnsI2c" />
		<result property="reponseEnsI3" column="reponseEnsI3" />
		<result property="reponseEnsII1" column="reponseEnsII1"
			nullValue="0" />
		<result property="reponseEnsII2" column="reponseEnsII2"
			nullValue="0" />
		<result property="reponseEnsII3" column="reponseEnsII3"
			nullValue="0" />
		<result property="reponseEnsII4" column="reponseEnsII4"
			nullValue="0" />
		<result property="reponseEnsII5" column="reponseEnsII5"
			nullValue="0" />
		<result property="reponseEnsII6" column="reponseEnsII6"
			nullValue="0" />
		<result property="reponseEnsII7" column="reponseEnsII7"
			nullValue="0" />
		<result property="reponseEnsII8" column="reponseEnsII8"
			nullValue="0" />
		<result property="reponseEnsII9" column="reponseEnsII9"
			nullValue="0" />
		<result property="reponseEnsII10" column="reponseEnsII10"
			nullValue="0" />
		<result property="reponseEnsII11" column="reponseEnsII11" />
	</resultMap>

	<statement id="getReponseEvaluation" resultMap="ReponseEvaluation">
		SELECT * FROM
		ReponseEvaluation
		WHERE idFicheEvaluation = #idFicheEvaluation#
		AND
		idConvention=#idConvention#
	</statement>
	
	<statement id="getReponseEvaluationFromCode" resultMap="ReponseEvaluation">
		SELECT * FROM ReponseEvaluation
		WHERE codeAcces = #codeAcces#
	</statement>
	
	<statement id="getReponsesEvaluation" resultMap="ReponseEvaluation">
		SELECT * FROM
		ReponseEvaluation
		WHERE idFicheEvaluation = #idFicheEvaluation#
	</statement>
	
	<insert id="addReponseEvaluation">
		INSERT INTO ReponseEvaluation
		(idFicheEvaluation, idConvention)
		VALUES
		(#idFicheEvaluation#, #idConvention#)
		<selectKey resultClass="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
	
	<update id="updateReponseEvaluationEtudiant">
		UPDATE ReponseEvaluation SET
		reponseEtuI1=#reponseEtuI1#,
		reponseEtuI1bis=#reponseEtuI1bis#,reponseEtuI2=#reponseEtuI2#,
		reponseEtuI3=#reponseEtuI3#,reponseEtuI4a=#reponseEtuI4a#,
		reponseEtuI4b=#reponseEtuI4b#,
		reponseEtuI4c=#reponseEtuI4c#,
		reponseEtuI4d=#reponseEtuI4d#,
		reponseEtuI5=#reponseEtuI5#,reponseEtuI6=#reponseEtuI6#,reponseEtuI7=#reponseEtuI7#,
		reponseEtuI7bis1=#reponseEtuI7bis1#,reponseEtuI7bis1a=#reponseEtuI7bis1a#,reponseEtuI7bis1b=#reponseEtuI7bis1b#,
		reponseEtuI7bis2=#reponseEtuI7bis2#,reponseEtuI8=#reponseEtuI8#,reponseEtuII1=#reponseEtuII1#,
		reponseEtuII1bis=#reponseEtuII1bis#,
		reponseEtuII2=#reponseEtuII2#,reponseEtuII2bis=#reponseEtuII2bis#,reponseEtuII3=#reponseEtuII3#,reponseEtuII3bis=#reponseEtuII3bis#,
		reponseEtuII4=#reponseEtuII4#,
		reponseEtuII5=#reponseEtuII5#,reponseEtuII5a=#reponseEtuII5a#,reponseEtuII5b=#reponseEtuII5b#,
		reponseEtuII6=#reponseEtuII6#,reponseEtuIII1=#reponseEtuIII1#,reponseEtuIII1bis=#reponseEtuIII1bis#,
		reponseEtuIII2=#reponseEtuIII2#,reponseEtuIII2bis=#reponseEtuIII2bis#,reponseEtuIII3=#reponseEtuIII3#,
		reponseEtuIII3bis=#reponseEtuIII3bis#,reponseEtuIII4=#reponseEtuIII4#,reponseEtuIII5a=#reponseEtuIII5a#,
		reponseEtuIII5b=#reponseEtuIII5b#,reponseEtuIII5bis=#reponseEtuIII5bis#,reponseEtuIII5c=#reponseEtuIII5c#,
		reponseEtuIII6=#reponseEtuIII6#,reponseEtuIII6bis=#reponseEtuIII6bis#,
		reponseEtuIII7=#reponseEtuIII7#,reponseEtuIII7bis=#reponseEtuIII7bis#,
		reponseEtuIII8=#reponseEtuIII8#,reponseEtuIII8bis=#reponseEtuIII8bis#,
		reponseEtuIII9=#reponseEtuIII9#,reponseEtuIII9bis=#reponseEtuIII9bis#,reponseEtuIII10=#reponseEtuIII10#,
		reponseEtuIII11=#reponseEtuIII11#,reponseEtuIII12=#reponseEtuIII12#,reponseEtuIII13=#reponseEtuIII13#,
		reponseEtuIII14=#reponseEtuIII14#,reponseEtuIII15=#reponseEtuIII15#,reponseEtuIII15bis=#reponseEtuIII15bis#,
		reponseEtuIII16=#reponseEtuIII16#,reponseEtuIII16bis=#reponseEtuIII16bis#,
		validationEtudiant=#validationEtudiant#
		WHERE idFicheEvaluation = #idFicheEvaluation# AND idConvention=#idConvention#
	</update>
	<update id="updateReponseEvaluationEntreprise">
		UPDATE ReponseEvaluation SET
		reponseEnt1=#reponseEnt1#,reponseEnt1bis=#reponseEnt1bis#,reponseEnt2=#reponseEnt2#,
		reponseEnt2bis=#reponseEnt2bis#,reponseEnt3=#reponseEnt3#,reponseEnt4=#reponseEnt4#,
		reponseEnt4bis=#reponseEnt4bis#,reponseEnt5=#reponseEnt5#,reponseEnt5bis=#reponseEnt5bis#,
		reponseEnt6=#reponseEnt6#,reponseEnt6bis=#reponseEnt6bis#,reponseEnt7=#reponseEnt7#,
		reponseEnt7bis=#reponseEnt7bis#,reponseEnt8=#reponseEnt8#,reponseEnt8bis=#reponseEnt8bis#,
		reponseEnt9=#reponseEnt9#,reponseEnt9bis=#reponseEnt9bis#,reponseEnt10=#reponseEnt10#,
		reponseEnt10bis=#reponseEnt10bis#,reponseEnt11=#reponseEnt11#,reponseEnt11bis=#reponseEnt11bis#,
		reponseEnt12=#reponseEnt12#,reponseEnt12bis=#reponseEnt12bis#,reponseEnt13=#reponseEnt13#,
		reponseEnt13bis=#reponseEnt13bis#,reponseEnt14=#reponseEnt14#,reponseEnt14bis=#reponseEnt14bis#,
		reponseEnt15=#reponseEnt15#,reponseEnt15bis=#reponseEnt15bis#,reponseEnt16=#reponseEnt16#,
		reponseEnt16bis=#reponseEnt16bis#,reponseEnt17=#reponseEnt17#,reponseEnt17bis=#reponseEnt17bis#,
		reponseEnt18=#reponseEnt18#,
		reponseEnt18bis=#reponseEnt18bis#,reponseEnt19=#reponseEnt19#,validationEntreprise=#validationEntreprise#
		WHERE idFicheEvaluation=#idFicheEvaluation#
		AND
		idConvention=#idConvention#
	</update>
	<update id="updateReponseEvaluationEnseignant">
		UPDATE ReponseEvaluation SET
		reponseEnsI1a=#reponseEnsI1a#,reponseEnsI1b=#reponseEnsI1b#,reponseEnsI1c=#reponseEnsI1c#,
		reponseEnsI2a=#reponseEnsI2a#,reponseEnsI2b=#reponseEnsI2b#,reponseEnsI2c=#reponseEnsI2c#,
		reponseEnsI3=#reponseEnsI3#,reponseEnsII1=#reponseEnsII1#,reponseEnsII2=#reponseEnsII2#,
		reponseEnsII3=#reponseEnsII3#,reponseEnsII4=#reponseEnsII4#,reponseEnsII5=#reponseEnsII5#,
		reponseEnsII6=#reponseEnsII6#,reponseEnsII7=#reponseEnsII7#,reponseEnsII8=#reponseEnsII8#,
		reponseEnsII9=#reponseEnsII9#,reponseEnsII10=#reponseEnsII10#,
		reponseEnsII11=#reponseEnsII11#,
		validationEnseignant=#validationEnseignant#
		WHERE
		idFicheEvaluation=#idFicheEvaluation# AND idConvention=#idConvention#
	</update>

	<update id="setCodeAcces">
		UPDATE ReponseEvaluation SET codeAcces=#codeAcces#
		WHERE idFicheEvaluation = #idFicheEvaluation# AND idConvention=#idConvention#
	</update>
	
	<update id="setEnvoiMailEntreprise">
		UPDATE ReponseEvaluation SET envoiMailTuteurPro=true,
		dateEnvoiMailTuteurPro=CURDATE()
		WHERE idFicheEvaluation = #idFicheEvaluation# AND idConvention=#idConvention#
	</update>
	
	<delete id="deleteReponseEvaluation">
		DELETE FROM ReponseEvaluation WHERE idFicheEvaluation
		= #idFicheEvaluation# AND idConvention=#idConvention#
	</delete>

</sqlMap>